function mouse_move(){null!==timeout&&(player.el.container.classList.remove("mouse-moving"),clearTimeout(timeout)),timeout=setTimeout(function(){player.el.container.classList.add("mouse-moving")},2500)}function full_screen(){player.el.video.requestFullscreen?player.el.video.requestFullscreen():player.el.video.mozRequestFullScreen?player.el.video.mozRequestFullScreen():player.el.video.webkitRequestFullscreen&&player.el.video.webkitRequestFullscreen()}function full_screen_exit(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullscreen?document.mozCancelFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}var player={};player.el={},player.el.container=document.querySelector(".player"),player.el.video=player.el.container.querySelector("video"),player.el.controls=player.el.container.querySelector(".controls"),player.el.timer=player.el.controls.querySelector(".timer"),player.el.time_total=player.el.timer.querySelector(".time-total"),player.el.time_progress=player.el.timer.querySelector(".time-progress"),player.el.toggle_play=player.el.controls.querySelector(".toggle-play"),player.el.play_button=player.el.toggle_play.querySelector(".play"),player.el.pause_button=player.el.toggle_play.querySelector(".pause"),player.el.timeline=player.el.controls.querySelector(".timeline"),player.el.timeline_progress=player.el.controls.querySelector(".timeline-progress"),player.el.thumbnail=player.el.controls.querySelector(".thumbnails"),player.el.thumbnail.video=player.el.thumbnail.querySelector("video"),player.el.thumbnail.timer=player.el.controls.querySelector(".thumbnails-timer"),player.el.volume=player.el.controls.querySelector(".volume"),player.el.volume.button=player.el.controls.querySelector(".volume-button"),player.el.volume.bar=player.el.controls.querySelector(".volume-bar"),player.el.volume.progress=player.el.controls.querySelector(".volume-progress"),player.el.video.volume=.5,player.el.thumbnail.video.volume=0,player.el.volume.progress.style.transform="scaleX(0.5)",player.el.toggle_fullscreen=player.el.controls.querySelector(".toggle-fullscreen"),player.el.canvas=player.el.container.querySelector("canvas"),player.el.ambilight=player.el.container.querySelector(".toggle-ambilight");var timeline_width=player.el.timeline.offsetWidth,player_offset=player.el.container.offsetLeft,timeline_offset=player.el.timeline.offsetLeft,timeout=null;window.addEventListener("mousemove",function(){mouse_move()}),player.el.toggle_play.addEventListener("click",function(){player.el.video.paused?(player.el.video.play(),player.el.thumbnail.video.play()):(player.el.video.pause(),player.el.thumbnail.video.pause())}),player.el.video.addEventListener("click",function(){player.el.video.paused?(player.el.video.play(),player.el.thumbnail.video.play()):(player.el.video.pause(),player.el.thumbnail.video.pause())}),player.el.video.addEventListener("play",function(){player.el.container.classList.add("is-playing")}),player.el.video.addEventListener("pause",function(){player.el.container.classList.remove("is-playing")}),player.el.video.addEventListener("loadedmetadata",function(){var e=Math.floor(player.el.video.duration),l=Math.floor(e/60),r=e-60*l;player.el.time_total.innerText=l+":"+r}),player.el.video.addEventListener("timeupdate",function(){var e=Math.floor(player.el.video.currentTime),l=Math.floor(e/60),r=e-60*l;10>r&&(r="0"+r),player.el.time_progress.innerText=l+":"+r},1e3),player.el.timeline.addEventListener("click",function(e){ratio=(e.clientX-(player_offset+timeline_offset))/timeline_width,time=ratio*player.el.video.duration,player.el.video.currentTime=time}),player.el.timeline.addEventListener("mousemove",function(e){ratio=(e.clientX-(player_offset+timeline_offset))/timeline_width,time=ratio*player.el.video.duration,player.el.thumbnail.video.currentTime=time,player.el.thumbnail.style.transform="translateX("+ratio*timeline_width+"px)";var l=Math.floor(time),r=Math.floor(l/60),t=l-60*r;10>t&&(t="0"+t),player.el.thumbnail.timer.innerText=r+":"+t}),window.setInterval(function(){var e=player.el.video.duration,l=player.el.video.currentTime,r=l/e;player.el.timeline_progress.style.transform="scaleX("+r+")"},50),player.el.volume.addEventListener("click",function(){volume<.05?(player.el.container.classList.add("mute"),player.el.video.volume=.5):player.el.video.volume=0}),player.el.volume.bar.addEventListener("click",function(e){volume_bar_offset=player.el.volume.bar.offsetLeft,volume_bar_width=player.el.volume.bar.offsetWidth,ratio=(e.clientX-(player_offset+volume_bar_offset))/volume_bar_width*10,ratio=Math.round(ratio)/10,player.el.video.volume=ratio,player.el.volume.progress.style.transform="scaleX("+ratio+")"}),player.el.video.addEventListener("volumechange",function(e){volume=player.el.video.volume,player.el.volume.progress.style.transform="scaleX("+volume+")",volume<.05?player.el.container.classList.add("mute"):player.el.container.classList.remove("mute")}),player.el.toggle_fullscreen.addEventListener("click",function(){player.el.container.classList.contains("full-screen")?(player.el.container.classList.remove("full-screen"),full_screen_exit()):(player.el.container.classList.contains("full-screen"),player.el.container.classList.add("full-screen"),full_screen())}),player.el.container.addEventListener("dblclick",function(){player.el.container.classList.contains("full-screen")?(player.el.container.classList.remove("full-screen"),full_screen_exit()):(player.el.container.classList.contains("full-screen"),player.el.container.classList.add("full-screen"),full_screen())}),document.addEventListener("fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange",function(){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?player.el.container.classList.add("full-screen"):player.el.container.classList.remove("full-screen")}),player.el.ambilight.addEventListener("click",function(){player.el.container.classList.contains("ambilight-mode")?(player.el.container.classList.remove("ambilight-mode"),document.body.style.background="#F9F9F9"):(player.el.container.classList.contains("ambilight-mode"),player.el.container.classList.add("ambilight-mode"),document.body.style.background="#222")}),ctx=player.el.canvas.getContext("2d");var timer_id;timer_id=window.setInterval(function(){ctx.drawImage(player.el.video,0,0,800,660)},30),document.addEventListener("keydown",function(e){mouse_move(),32===e.keyCode&&(player.el.video.paused?(player.el.video.play(),player.el.thumbnail.video.play()):(player.el.video.pause(),player.el.thumbnail.video.pause())),70===e.keyCode&&(player.el.container.classList.contains("full-screen")?(player.el.container.classList.remove("full-screen"),full_screen_exit()):(player.el.container.classList.contains("full-screen"),player.el.container.classList.add("full-screen"),full_screen())),39===e.keyCode&&(player.el.video.currentTime+=10),37===e.keyCode&&(player.el.video.currentTime-=10),38===e.keyCode&&player.el.video.volume<=.9&&(player.el.video.volume+=.1),40===e.keyCode&&player.el.video.volume>=.1&&(player.el.video.volume-=.1),77===e.keyCode&&(player.el.video.volume>=.1?player.el.video.volume=0:player.el.video.volume=.5),65===e.keyCode&&(player.el.container.classList.contains("ambilight-mode")?(player.el.container.classList.remove("ambilight-mode"),document.body.style.background="#F9F9F9"):(player.el.container.classList.contains("ambilight-mode"),player.el.container.classList.add("ambilight-mode"),document.body.style.background="#222"))});